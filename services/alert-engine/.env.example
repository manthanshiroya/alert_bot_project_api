# =============================================================================
# ALERT ENGINE SERVICE - ENVIRONMENT CONFIGURATION
# =============================================================================

# -----------------------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------------------
PORT=3004
NODE_ENV=development
SERVICE_NAME=alert-engine
SERVICE_VERSION=1.0.0

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
# MongoDB
MONGODB_URI=mongodb://localhost:27017/nagar_bot_dev
MONGODB_TEST_URI=mongodb://localhost:27017/nagar_bot_test
DB_MAX_POOL_SIZE=10
DB_SERVER_SELECTION_TIMEOUT=5000
DB_SOCKET_TIMEOUT=45000

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_RETRIES_PER_REQUEST=3
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000

# -----------------------------------------------------------------------------
# AUTHENTICATION & SECURITY
# -----------------------------------------------------------------------------
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=24h
API_KEY=your-api-key-for-inter-service-communication
ENCRYPTION_KEY=your-32-character-encryption-key-here
HASH_SALT_ROUNDS=12

# -----------------------------------------------------------------------------
# EXTERNAL SERVICES
# -----------------------------------------------------------------------------
# API Gateway
API_GATEWAY_URL=http://localhost:3000
API_GATEWAY_TIMEOUT=30000

# Subscription Service
SUBSCRIPTION_SERVICE_URL=http://localhost:3001
SUBSCRIPTION_SERVICE_TIMEOUT=10000

# Telegram Service
TELEGRAM_SERVICE_URL=http://localhost:3003
TELEGRAM_SERVICE_TIMEOUT=15000

# Frontend URL
FRONTEND_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# ALERT ENGINE CONFIGURATION
# -----------------------------------------------------------------------------
# Processing
ALERT_PROCESSING_INTERVAL=5000
ALERT_BATCH_SIZE=100
ALERT_MAX_RETRIES=3
ALERT_RETRY_DELAY=1000
ALERT_TIMEOUT=30000

# Queue Configuration
QUEUE_CONCURRENCY=5
QUEUE_MAX_SIZE=1000
QUEUE_PROCESSING_TIMEOUT=60000

# Condition Evaluation
CONDITION_EVALUATION_TIMEOUT=5000
CONDITION_MAX_COMPLEXITY=100
CONDITION_CACHE_TTL=300

# Alert Cooldown
ALERT_COOLDOWN_PERIOD=300000
ALERT_MAX_FREQUENCY=10
ALERT_FREQUENCY_WINDOW=3600000

# -----------------------------------------------------------------------------
# DATA SOURCES
# -----------------------------------------------------------------------------
# Cryptocurrency APIs
COINGECKO_API_URL=https://api.coingecko.com/api/v3
COINGECKO_API_KEY=
COINGECKO_RATE_LIMIT=50
COINGECKO_TIMEOUT=10000

BINANCE_API_URL=https://api.binance.com/api/v3
BINANCE_API_KEY=
BINANCE_SECRET_KEY=
BINANCE_RATE_LIMIT=1200
BINANCE_TIMEOUT=10000

COINBASE_API_URL=https://api.coinbase.com/v2
COINBASE_API_KEY=
COINBASE_SECRET_KEY=
COINBASE_PASSPHRASE=
COINBASE_TIMEOUT=10000

# Stock Market APIs
ALPHA_VANTAGE_API_URL=https://www.alphavantage.co/query
ALPHA_VANTAGE_API_KEY=
ALPHA_VANTAGE_RATE_LIMIT=5
ALPHA_VANTAGE_TIMEOUT=15000

FINNHUB_API_URL=https://finnhub.io/api/v1
FINNHUB_API_KEY=
FINNHUB_RATE_LIMIT=60
FINNHUB_TIMEOUT=10000

# News APIs
NEWS_API_URL=https://newsapi.org/v2
NEWS_API_KEY=
NEWS_RATE_LIMIT=1000
NEWS_TIMEOUT=10000

# Technical Analysis
TECHNICAL_ANALYSIS_ENABLED=true
TECHNICAL_INDICATORS_CACHE_TTL=60
TECHNICAL_DATA_RETENTION_DAYS=30

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# API Rate Limits
API_RATE_LIMIT_WINDOW_MS=60000
API_RATE_LIMIT_MAX_REQUESTS=1000

# Alert Processing Rate Limits
ALERT_RATE_LIMIT_WINDOW_MS=60000
ALERT_RATE_LIMIT_MAX_REQUESTS=500

# -----------------------------------------------------------------------------
# LOGGING CONFIGURATION
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FORMAT=combined
LOG_DIR=./logs
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5
LOG_DATE_PATTERN=YYYY-MM-DD

# Console Logging
LOG_CONSOLE_ENABLED=true
LOG_CONSOLE_LEVEL=debug
LOG_CONSOLE_COLORIZE=true

# File Logging
LOG_FILE_ENABLED=true
LOG_FILE_LEVEL=info
LOG_ERROR_FILE=error.log
LOG_COMBINED_FILE=combined.log

# -----------------------------------------------------------------------------
# MONITORING & METRICS
# -----------------------------------------------------------------------------
# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Performance Monitoring
PERFORMANCE_MONITORING_ENABLED=true
PERFORMANCE_SAMPLE_RATE=0.1

# -----------------------------------------------------------------------------
# CACHING CONFIGURATION
# -----------------------------------------------------------------------------
# General Cache Settings
CACHE_ENABLED=true
CACHE_DEFAULT_TTL=3600
CACHE_MAX_KEYS=10000

# Market Data Cache
MARKET_DATA_CACHE_TTL=60
MARKET_DATA_CACHE_MAX_KEYS=1000

# Alert Cache
ALERT_CACHE_TTL=300
ALERT_CACHE_MAX_KEYS=5000

# User Data Cache
USER_DATA_CACHE_TTL=1800
USER_DATA_CACHE_MAX_KEYS=2000

# -----------------------------------------------------------------------------
# DEVELOPMENT & DEBUGGING
# -----------------------------------------------------------------------------
DEBUG_ENABLED=false
DEBUG_NAMESPACE=alert-engine:*
SWAGGER_ENABLED=true
SWAGGER_PATH=/api-docs

# Development Features
DEV_MOCK_DATA_ENABLED=false
DEV_SIMULATE_ALERTS=false
DEV_BYPASS_RATE_LIMITS=false

# Testing
TEST_TIMEOUT=30000
TEST_COVERAGE_THRESHOLD=80
TEST_MOCK_EXTERNAL_APIS=true

# -----------------------------------------------------------------------------
# PRODUCTION SETTINGS
# -----------------------------------------------------------------------------
# Cluster Mode
CLUSTER_ENABLED=false
CLUSTER_WORKERS=0

# Graceful Shutdown
GRACEFUL_SHUTDOWN_TIMEOUT=30000
GRACEFUL_SHUTDOWN_FORCE_EXIT=true

# Security Headers
SECURITY_HEADERS_ENABLED=true
CORS_ENABLED=true
CORS_ORIGIN=*
CORS_CREDENTIALS=true

# Request Limits
REQUEST_SIZE_LIMIT=10mb
REQUEST_PARAMETER_LIMIT=1000
REQUEST_TIMEOUT=30000

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
# Alert Features
FEATURE_PRICE_ALERTS=true
FEATURE_VOLUME_ALERTS=true
FEATURE_TECHNICAL_ALERTS=true
FEATURE_NEWS_ALERTS=true
FEATURE_CUSTOM_ALERTS=true

# Advanced Features
FEATURE_MACHINE_LEARNING=false
FEATURE_SENTIMENT_ANALYSIS=false
FEATURE_SOCIAL_MEDIA_MONITORING=false

# Integration Features
FEATURE_WEBHOOK_ALERTS=true
FEATURE_EMAIL_ALERTS=false
FEATURE_SMS_ALERTS=false

# -----------------------------------------------------------------------------
# BACKUP & RECOVERY
# -----------------------------------------------------------------------------
BACKUP_ENABLED=false
BACKUP_INTERVAL=86400000
BACKUP_RETENTION_DAYS=7
BACKUP_STORAGE_PATH=./backups

# Data Retention
DATA_RETENTION_ENABLED=true
ALERT_HISTORY_RETENTION_DAYS=90
MARKET_DATA_RETENTION_DAYS=30
LOG_RETENTION_DAYS=14

# -----------------------------------------------------------------------------
# EXTERNAL INTEGRATIONS
# -----------------------------------------------------------------------------
# Webhook Configuration
WEBHOOK_ENABLED=true
WEBHOOK_TIMEOUT=10000
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY=1000

# Third-party Services
SLACK_WEBHOOK_URL=
DISCORD_WEBHOOK_URL=
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
SENDGRID_API_KEY=

# -----------------------------------------------------------------------------
# TIMEZONE & LOCALIZATION
# -----------------------------------------------------------------------------
TIMEZONE=UTC
LOCALE=en-US
DATE_FORMAT=YYYY-MM-DD HH:mm:ss
CURRENCY_FORMAT=USD

# Market Hours
MARKET_HOURS_ENABLED=true
STOCK_MARKET_OPEN=09:30
STOCK_MARKET_CLOSE=16:00
STOCK_MARKET_TIMEZONE=America/New_York